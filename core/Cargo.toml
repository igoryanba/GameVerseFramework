[package]
name = "gameverse_core"
version = "0.1.0"
edition = "2021"
description = "Core component of GameVerse Framework - a high-performance multiplayer game framework"
authors = ["GameVerse Team"]
license = "MIT"
repository = "https://github.com/gameverse/gameverse-framework"

[lib]
name = "gameverse_core"
path = "src/lib.rs"

[[bin]]
name = "gameverse_server"
path = "src/bin/server.rs"

[[example]]
name = "dynamic_plugin_demo"
path = "../examples/dynamic_plugin_demo.rs"

[dependencies]
# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ä–∞–Ω—Ç–∞–π–º
tokio = { version = "1.28.0", features = ["full"] }

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
tracing = "0.1.37"
tracing-subscriber = { version = "0.3.17", features = ["env-filter", "json"] }
tracing-appender = "0.2.2"
tracing-opentelemetry = "0.19.0"
opentelemetry = { version = "0.19.0", features = ["rt-tokio"] }
opentelemetry-jaeger = { version = "0.18.0", features = ["rt-tokio"] }

# –°–µ—Ç–µ–≤–æ–π —Å—Ç–µ–∫
quinn = "0.10.1"  # QUIC –ø—Ä–æ—Ç–æ–∫–æ–ª
tonic = "0.9.2"   # gRPC
prost = "0.11.9"  # Protocol Buffers

# –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Å—Ç—Ä–∏–º—ã (–¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π)
tokio-stream = "0.1.14"

# –°–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è
serde = { version = "1.0.160", features = ["derive"] }
serde_json = "1.0.96"
toml = "0.8.8"    # üî• TOML –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø–ª–∞–≥–∏–Ω–æ–≤
flatbuffers = "23.3.3"

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
config = "0.13.3"
dotenv = "0.15.0"

# –£—Ç–∏–ª–∏—Ç—ã
uuid = { version = "1.3.1", features = ["v4", "serde"] }
chrono = { version = "0.4.24", features = ["serde"] }
thiserror = "1.0.40"
anyhow = "1.0.70"
semver = "1.0.17"  # –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–ª–∞–≥–∏–Ω–æ–≤
rand = "0.8.5"     # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
sha2 = "0.10.6"    # –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
notify = "6.1.1"   # üî• File system watcher –¥–ª—è hot reload

# –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å FFI
libloading = "0.8.0"  # –î–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫
libc = "0.2.141"
bindgen = "0.65.1"

# –†–∞–±–æ—Ç–∞ —Å Lua
mlua = { version = "0.8.8", features = ["luajit", "vendored", "async"] }

# –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
sqlx = { version = "0.6.3", features = ["runtime-tokio-rustls", "postgres", "uuid", "chrono", "json"] }
redis = { version = "0.23.0", features = ["tokio-comp"] }

# –í–µ–±-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã—Ö API
axum = "0.6.18"
tower = "0.4.13"
tower-http = { version = "0.4.0", features = ["trace", "cors"] }
hyper = "0.14.26"

[dev-dependencies]
tokio-test = "0.4.2"
mockall = "0.11.4"
criterion = "0.5.1"
rstest = "0.17.0"
tempfile = "3.8.1"  # üî• –î–ª—è —Ç–µ—Å—Ç–æ–≤ dynamic plugin loading

[build-dependencies]
tonic-build = "0.9.2"
prost-build = "0.11.9"

[features]
default = ["lua_scripting", "typescript_scripting", "plugin_system"] # üî• –î–æ–±–∞–≤–∏–ª plugin_system
lua_scripting = []
typescript_scripting = []
wasm_scripting = []
plugin_system = []  # üî• –ù–û–í–ê–Ø –§–ò–ß–ê
extended_logging = []
monitoring = []

[profile.dev]
opt-level = 0
debug = true
debug-assertions = true
overflow-checks = true
lto = false
panic = "unwind"
incremental = true
codegen-units = 256

[profile.release]
opt-level = 3
debug = false
debug-assertions = false
overflow-checks = false
lto = true
panic = "unwind"
incremental = false
codegen-units = 16

[profile.bench]
opt-level = 3
debug = false
debug-assertions = false
overflow-checks = false
lto = true
panic = "unwind"
